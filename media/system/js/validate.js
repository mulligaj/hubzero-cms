/*
		GNU General Public License version 2 or later; see LICENSE.txt
*/
var JFormValidator=function(){this.initialize=function(){this.handlers=Object(),this.custom=Object(),this.setHandler("username",function(e){return regex=new RegExp("[<|>|\"|'|%|;|(|)|&]","i"),!regex.test(e)}),this.setHandler("password",function(e){return regex=/^\S[\S ]{2,98}\S$/,regex.test(e)}),this.setHandler("numeric",function(e){return regex=/^(\d|-)?(\d|,)*\.?\d*$/,regex.test(e)}),this.setHandler("email",function(e){return regex=/^[a-zA-Z0-9._-]+(\+[a-zA-Z0-9._-]+)*@([a-zA-Z0-9.-]+\.)+[a-zA-Z0-9.-]{2,4}$/,regex.test(e)});var e=$("form.form-validate");e.each(function(e,a){this.attachToForm(a)},this)},this.setHandler=function(e,a,t){t=""==t?!0:t,this.handlers[e]={enabled:t,exec:a}},this.attachToForm=function(e){e.find("input,textarea,select,button").each(function(e,a){a=$(a),a.hasClass("required")&&(a.attr("aria-required","true"),a.attr("required","required")),"input"!=a.prop("tagName")&&"button"!=$(a).prop("tagName")||"submit"!=$(a).attr("type")?(a.on("blur",function(){return document.formvalidator.validate(this)}),a.hasClass("validate-email")&&this.inputemail&&(a.attr("type")="email")):a.hasClass("validate")&&a.on("click",function(){return document.formvalidator.isValid(this.form)})})},this.inputemail=function(){var e=document.createElement("input");return e.setAttribute("type","email"),"text"!==e.type},this.validate=function(e){if(e=$(e),e.attr("disabled")&&!e.hasClass("required"))return this.handleResponse(!0,e),!0;if(e.hasClass("required"))if("fieldset"==e.prop("tagName")&&(e.hasClass("radio")||e.hasClass("checkboxes")))for(var a=0;;a++){if(!$(e.attr("id")+a))return this.handleResponse(!1,e),!1;if($(e.attr("id")+a).checked)break}else if(!e.val())return this.handleResponse(!1,e),!1;var t=e.className&&-1!=e.className.search(/validate-([a-zA-Z0-9\_\-]+)/)?e.className.match(/validate-([a-zA-Z0-9\_\-]+)/)[1]:"";return""==t?(this.handleResponse(!0,e),!0):t&&"none"!=t&&this.handlers[t]&&e.get("value")&&1!=this.handlers[t].exec(e.get("value"))?(this.handleResponse(!1,e),!1):(this.handleResponse(!0,e),!0)},this.isValid=function(e){for(var a=!0,t=e.find("fieldset"),i=0;i<t.length;i++)0==this.validate(t[i])&&(a=!1);return a},this.handleResponse=function(e,a){if(!a.labelref){var t=$("label");t.each(function(e){e=$(e),e.attr("for")==a.attr("id")&&(a.labelref=e)})}0==e?(a.addClass("invalid"),a.attr("aria-invalid","true"),a.labelref&&($(a.labelref).addClass("invalid"),$(a.labelref).attr("aria-invalid","true"))):(a.removeClass("invalid"),a.attr("aria-invalid","false"),a.labelref&&($(a.labelref).removeClass("invalid"),$(a.labelref).attr("aria-invalid","false")))}};document.formvalidator=null,jQuery(document).ready(function(){document.formvalidator=new JFormValidator});